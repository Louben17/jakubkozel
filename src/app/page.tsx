"use client";

import { useEffect, useRef } from 'react';
import Navigation from '@/components/Navigation';

export default function Home() {
  const svgRef = useRef<SVGSVGElement>(null);

  useEffect(() => {
    const svg = svgRef.current;
    if (!svg) return;

    // Najdi všechny path elementy
    const paths = svg.querySelectorAll('path');
    
    // Pro každý path vytvoř animovaný clip-path
    paths.forEach((path, index) => {
      const pathElement = path as SVGPathElement;
      const length = pathElement.getTotalLength();
      
      // Nastav fill na originální path
      pathElement.style.fill = '#333';
      pathElement.style.stroke = 'none';
      
      // Vytvoř animující se překrývající element pro "odhalování"
      const revealElement = document.createElement('div');
      revealElement.style.position = 'absolute';
      revealElement.style.top = '0';
      revealElement.style.left = '0';
      revealElement.style.width = '100%';
      revealElement.style.height = '100%';
      revealElement.style.background = 'white';
      revealElement.style.clipPath = 'polygon(0 0, 0 0, 0 100%, 0 100%)'; // Začíná skrytý
      revealElement.style.animation = `revealText 2s ease-out ${index * 0.3}s forwards`;
      
      // Alternativní řešení - použij stroke animation + fill na konci
      const animatedStroke = pathElement.cloneNode(true) as SVGPathElement;
      animatedStroke.style.fill = 'none';
      animatedStroke.style.stroke = '#333';
      animatedStroke.style.strokeWidth = '3px';
      animatedStroke.style.strokeLinecap = 'round';
      animatedStroke.style.strokeLinejoin = 'round';
      animatedStroke.style.strokeDasharray = `${length}`;
      animatedStroke.style.strokeDashoffset = `${length}`;
      animatedStroke.style.animation = `drawPath 2s ease-out ${index * 0.3}s forwards`;
      
      // Skryj originální fill na začátku
      pathElement.style.opacity = '0';
      
      // Vložit stroke animaci
      pathElement.parentNode?.insertBefore(animatedStroke, pathElement);
      
      // Po dokončení stroke animace - postupně zobraz fill
      setTimeout(() => {
        // Postupné zobrazení fill písmeno po písmeno
        pathElement.style.transition = 'opacity 0.8s ease';
        pathElement.style.opacity = '1';
        
        // Po chvíli schovat stroke
        setTimeout(() => {
          animatedStroke.style.transition = 'opacity 0.5s ease';
          animatedStroke.style.opacity = '0';
        }, 800);
      }, (index * 300) + 2000);
      
      console.log(`Path ${index + 1}: délka = ${Math.round(length)}px`);
    });

    // Spustí animaci po 300ms
    const timer = setTimeout(() => {
      svg.style.opacity = '1';
    }, 300);

    return () => {
      clearTimeout(timer);
    };
  }, []);

  return (
    <div className="min-h-screen bg-white relative overflow-hidden" style={{ isolation: 'isolate' }}>
      
      <Navigation />

      {/* SVG Handwriting animace */}
      <div style={{
        position: 'fixed',
        top: 0,
        left: 0,
        width: '100vw',
        height: '100vh',
        display: 'flex',
        alignItems: 'center',
        justifyContent: 'center',
        zIndex: 15,
        pointerEvents: 'none',
      }}>
        
        <svg 
          ref={svgRef}
          xmlns="http://www.w3.org/2000/svg" 
          viewBox="0 0 726.05 345.64"
          style={{
            width: 'min(80vw, 600px)',
            height: 'auto',
            opacity: '0',
            transition: 'opacity 0.3s ease',
          }}
        >
          <path d="M174.99,150.78c1.74-.75,3.37-.5,4.87.75,1.5,1.25,2.56,2.87,3.18,4.87.62,2,.81,4.06.56,6.18-.25,2.12-1.12,3.81-2.62,5.06-4.5,3.5-10.55,8.8-18.17,15.92-7.62,7.12-15.17,14.42-22.67,21.92-7.49,7.49-14.24,14.42-20.23,20.79-5.99,6.37-9.49,10.81-10.49,13.3-4.5,10.24-9.42,21.04-14.8,32.41-5.37,11.36-10.92,22.04-16.67,32.03-5.74,9.99-11.61,18.73-17.61,26.22-5.99,7.49-12.11,12.36-18.36,14.61-3,1.25-7.49,1.06-13.49-.56-5.99-1.63-11.48-4.31-16.48-8.05-4.99-3.75-8.62-8.43-10.86-14.05-2.25-5.62-1.25-12.05,3-19.29,5.24-9.24,11.86-17.98,19.85-26.22,8-8.24,15.8-15.79,23.41-22.67,7.62-6.87,14.3-12.8,20.04-17.79,5.75-4.99,9.24-8.74,10.49-11.24,3.25-6.49,6.99-14.92,11.24-25.29,4.25-10.36,8.49-20.85,12.74-31.47,4.25-10.61,8.18-20.42,11.8-29.41,3.62-8.99,6.18-15.48,7.68-19.48,1.5-3.49,4.24-5.62,8.24-6.37,3.99-.75,8.05-.56,12.18.56,4.12,1.12,7.49,3,10.11,5.62,2.62,2.62,3.43,5.56,2.44,8.8-1.5,4.5-3.44,9.55-5.81,15.17-2.38,5.62-4.81,11.24-7.31,16.86-2.5,5.62-4.87,10.99-7.12,16.11-2.25,5.12-4,9.55-5.24,13.3,2.49-2.25,6.05-5.43,10.68-9.55,4.62-4.12,9.37-8.24,14.24-12.36,4.87-4.12,9.3-7.8,13.3-11.05,3.99-3.24,6.61-5.12,7.87-5.62ZM20.27,320.85c6.74-5.75,12.99-12.55,18.73-20.42,5.75-7.87,11.61-17.04,17.61-27.53-4.24,4.24-8.49,8.67-12.74,13.3-4.24,4.62-8.05,9.05-11.43,13.3-3.37,4.24-6.18,8.24-8.43,11.99s-3.49,6.87-3.75,9.37ZM161.5,99.83c-1.25,2-3.37,3.06-6.37,3.18-3,.13-6.12-.38-9.37-1.5-3.25-1.12-5.99-2.56-8.24-4.31-2.25-1.74-3.13-3.62-2.62-5.62.5-3,1.31-6.37,2.44-10.12s2.25-7.36,3.37-10.86c1.12-3.49,2.18-6.74,3.18-9.74,1-3,1.87-5.24,2.62-6.74,1.5-2.25,4.18-3.18,8.05-2.81,3.87.38,7.68,1.38,11.43,3,3.75,1.63,6.87,3.69,9.37,6.18,2.49,2.5,3.12,4.87,1.87,7.12-1.75,3.25-4.19,8.18-7.31,14.8-3.13,6.62-5.94,12.43-8.43,17.42Z"/>
          <path d="M319.59,124.55c.75-1,2.18-1.43,4.31-1.31,2.12.13,4.12.69,5.99,1.69,1.87,1,3.37,2.31,4.5,3.93,1.12,1.63,1.18,3.31.19,5.06-4.75,8.24-10.18,17.42-16.3,27.54-6.12,10.11-12.61,20.04-19.48,29.78-6.87,9.74-13.93,18.54-21.17,26.41-7.25,7.87-14.36,13.43-21.35,16.67-3.75,1.75-7.68,2.31-11.8,1.69-4.12-.62-7.87-2-11.24-4.12-3.37-2.12-6.25-4.74-8.62-7.87-2.38-3.12-3.69-6.18-3.93-9.18-.5-3.99,0-9.49,1.5-16.48,1.5-6.99,3.12-13.36,4.87-19.11-3,3.5-6.18,7.56-9.55,12.18-3.37,4.62-7.06,9.55-11.05,14.8-4,5.25-8.18,10.49-12.55,15.73-4.37,5.25-8.93,10.12-13.67,14.61-2.25,2.25-5.68,3.13-10.3,2.62-4.62-.5-9.18-1.81-13.67-3.93-4.5-2.12-8.43-4.87-11.8-8.24-3.37-3.37-4.81-6.93-4.31-10.68.75-9.49,3-19.6,6.74-30.34,3.75-10.74,8.31-21.17,13.67-31.28,5.37-10.12,11.36-19.54,17.98-28.28,6.61-8.74,13.17-15.86,19.67-21.35,4.74-3.75,9.11-5.87,13.11-6.37,3.99-.5,7.87-.06,11.61,1.31,3.75,1.38,7.49,3.37,11.24,5.99,3.75,2.62,7.74,5.19,11.99,7.68,2.75-3,5.43-6.18,8.05-9.55,2.62-3.37,5.43-6.68,8.43-9.93,1.74-2.25,4.55-3.12,8.43-2.62,3.87.5,7.55,1.87,11.05,4.12,3.49,2.25,6.3,4.93,8.43,8.05,2.12,3.13,2.31,6.06.56,8.8-8.49,14.49-15.3,27.35-20.42,38.59-5.12,11.24-8.87,20.73-11.24,28.47-2.38,7.74-3.5,13.62-3.37,17.61.12,4,1.06,5.99,2.81,5.99,4.99-.25,12.61-6.99,22.85-20.23,10.24-13.23,22.85-32.71,37.84-58.44ZM228.56,139.16c.75-1,1.12-2.75,1.12-5.25s-.44-4.81-1.31-6.93c-.88-2.12-2.19-3.43-3.93-3.93-1.75-.5-4,.75-6.74,3.75-5.75,5.5-11.05,11.99-15.92,19.48-4.87,7.49-9.12,14.86-12.74,22.1-3.62,7.25-6.56,13.93-8.8,20.04-2.25,6.12-3.37,10.68-3.37,13.67,2.75-2.25,6.43-5.93,11.05-11.05,4.62-5.12,9.42-10.8,14.42-17.04,4.99-6.24,9.86-12.49,14.61-18.73,4.74-6.24,8.62-11.61,11.61-16.11Z"/>
          <path d="M428.23,20.03c-3.75,1.5-8.56,5.5-14.42,11.99-5.87,6.5-12.05,14.36-18.54,23.6-6.5,9.24-13.05,19.17-19.67,29.78-6.62,10.62-12.68,20.79-18.17,30.53-5.5,9.74-10.06,18.42-13.67,26.04-3.62,7.62-5.68,12.92-6.18,15.92,3.75-4.74,7.99-10.05,12.74-15.92,4.74-5.87,9.68-11.74,14.8-17.61,5.12-5.87,10.24-11.43,15.36-16.67,5.12-5.25,9.93-9.61,14.42-13.11,1.74-1.5,3.8-2.93,6.18-4.31,2.37-1.37,4.68-1.43,6.93-.19,7.24,3.5,12.36,6.74,15.36,9.74s2.87,7.25-.37,12.74c-3,5-7.31,10.99-12.92,17.98-5.62,7-11.61,14.05-17.98,21.17-6.37,7.12-12.49,13.8-18.36,20.04-5.87,6.25-10.55,11.12-14.05,14.61,7.99-.25,15.61.32,22.85,1.69,7.24,1.38,12.23,3.31,14.98,5.81.75,1,.69,3.25-.19,6.74-.88,3.5-2.31,6.93-4.31,10.3-2,3.37-4.19,6.12-6.56,8.24-2.38,2.12-4.68,2.44-6.93.94-3.5-2.49-7.81-4.62-12.92-6.37-5.12-1.75-10.68-2.75-16.67-3-5.99-.25-12.05.32-18.17,1.69-6.12,1.38-11.68,3.69-16.67,6.93-1.5,5.24-2.81,9.99-3.93,14.24-1.12,4.25-1.93,7.87-2.43,10.86-.75,2.75-2.93,4.19-6.56,4.31-3.62.13-7.36-.38-11.24-1.5-3.87-1.12-7.31-2.81-10.3-5.06-3-2.25-4.12-4.5-3.37-6.74,2-7.49,5.31-17.48,9.93-29.97,4.62-12.49,9.99-26.22,16.11-41.21,6.12-14.99,12.92-30.47,20.42-46.45,7.49-15.98,15.11-31.28,22.85-45.89,7.74-14.61,15.48-27.78,23.23-39.52,7.74-11.74,15.11-20.85,22.1-27.35,4.24-3.99,8.24-5.62,11.99-4.87s8.36,2.87,13.86,6.37c3.24,2,6.24,3.88,8.99,5.62,2.75,1.75,3.24,4.37,1.5,7.87ZM378.03,124.93c-5,4-10.24,8.87-15.73,14.61-5.5,5.75-10.68,11.68-15.55,17.79-4.87,6.12-9.18,11.99-12.92,17.61-3.75,5.62-6.5,10.3-8.24,14.05,4.74-4.5,9.86-9.86,15.36-16.11,5.49-6.24,10.74-12.49,15.73-18.73,4.99-6.24,9.42-12.05,13.3-17.42,3.87-5.37,6.56-9.3,8.05-11.8Z"/>
          <path d="M558.59,140.29c.75-1.25,1.93-1.81,3.56-1.69,1.62.13,3.24.63,4.87,1.5,1.62.88,3,1.94,4.12,3.18,1.12,1.25,1.56,2.25,1.31,3-1.75,4-4.06,9.24-6.93,15.73-2.87,6.5-6.25,13.49-10.11,20.98-3.88,7.49-8,14.93-12.36,22.29-4.37,7.37-8.93,13.8-13.67,19.29-4.75,5.5-9.5,9.68-14.24,12.55-4.75,2.87-9.37,3.31-13.86,1.31-8-3.75-14.05-8.11-18.17-13.11-4.12-4.99-5.68-12.23-4.68-21.73-4.5,6.74-8.75,12.99-12.74,18.73-4,5.75-9.87,12.61-17.61,20.6-2.75,3-6.62,4.75-11.61,5.24-5,.5-9.93.06-14.8-1.31-4.87-1.37-9.18-3.56-12.92-6.56s-5.74-6.49-5.99-10.49c-.25-4.5.25-10.24,1.5-17.23,1.25-6.99,2.94-14.55,5.06-22.67,2.12-8.11,4.62-16.3,7.49-24.54,2.87-8.24,5.75-15.92,8.62-23.04,2.87-7.12,5.56-13.11,8.05-17.98,2.49-4.87,4.62-8.05,6.37-9.55,1.74-1.74,4.37-2.44,7.87-2.06,3.49.37,6.8,1.31,9.93,2.81,3.12,1.5,5.62,3.31,7.49,5.43,1.87,2.12,2.31,4.06,1.31,5.81-2,3.5-4.75,9.43-8.24,17.79-3.5,8.37-7,17.36-10.49,26.97-3.5,9.62-6.62,18.86-9.37,27.72-2.75,8.87-4.25,15.42-4.5,19.67,1.25-.25,3.31-2.12,6.18-5.62,2.87-3.49,6.24-8.18,10.11-14.05,3.87-5.87,8.05-12.67,12.55-20.42,4.5-7.74,9.18-15.92,14.05-24.54,4.87-8.62,9.61-17.42,14.24-26.41,4.62-8.99,8.93-17.85,12.92-26.6,1.5-3.24,4.18-4.87,8.05-4.87s7.68.88,11.43,2.62c3.75,1.75,6.8,4.06,9.18,6.93,2.37,2.87,3.06,5.43,2.06,7.68-2.75,5.99-5.87,13.8-9.37,23.41-3.5,9.62-6.68,19.61-9.55,29.97-2.87,10.37-5.19,20.17-6.93,29.41-1.75,9.24-2.25,16.24-1.5,20.98,4.74-3,9.61-7.74,14.61-14.24,4.99-6.49,9.8-13.49,14.42-20.98,4.62-7.49,8.86-15.04,12.74-22.66,3.87-7.62,7.05-14.05,9.55-19.29Z"/>
          <path d="M666.86,138.79c14.48-8.74,26.35-13.49,35.59-14.24,9.24-.75,17.1,1.63,23.6,7.12-4.5,1.25-10.37,3.81-17.61,7.68-7.25,3.88-14.55,8.31-21.92,13.3-7.37,5-14.18,10.18-20.42,15.55-6.25,5.37-10.49,10.18-12.74,14.42-1.75,3-4.44,7.56-8.05,13.67-3.62,6.12-7.87,12.61-12.74,19.48-4.87,6.87-10.18,13.67-15.92,20.42-5.75,6.74-11.49,12.24-17.23,16.48-5.5,4-10.81,6.56-15.92,7.68-5.12,1.12-9.8-.06-14.05-3.56-4.75-3.75-7.25-7.87-7.49-12.36-.25-4.5,1-9.18,3.75-14.05,2.75-4.87,6.56-9.93,11.43-15.17,4.87-5.24,9.99-10.3,15.36-15.17,5.37-4.87,10.49-9.55,15.36-14.05,4.87-4.5,8.8-8.62,11.8-12.36,2.75-3.24,5.18-7.24,7.3-11.99,2.12-4.74,3.75-9.49,4.87-14.24,1.12-4.74,1.69-8.99,1.69-12.74s-.75-6.24-2.25-7.49c-8,3.5-15.68,9.62-23.04,18.36-7.37,8.75-14.05,18.3-20.04,28.66-5.99,10.37-11.18,20.86-15.55,31.47-4.37,10.62-7.56,19.54-9.55,26.79-.75,2.75-3.18,4.19-7.3,4.31-4.12.13-8.37-.56-12.74-2.06-4.37-1.5-8.05-3.75-11.05-6.74s-3.75-6.37-2.25-10.12c5.99-15.48,12.43-33.09,19.29-52.82,6.87-19.73,14.05-39.52,21.54-59.38,7.49-19.85,15.42-38.71,23.79-56.57,8.36-17.85,17.17-32.53,26.41-44.02,2.49-3,6.24-3.99,11.24-3,4.99,1,9.68,3,14.05,5.99,4.37,3,7.62,6.37,9.74,10.11,2.12,3.75,1.56,6.74-1.69,8.99-4.25,3-8.68,7.56-13.3,13.67-4.62,6.12-9.24,13.24-13.86,21.35-4.62,8.12-9.05,16.8-13.3,26.04-4.25,9.24-8.12,18.36-11.61,27.35,2.75-2,5.37-3.87,7.87-5.62,2.49-1.74,4.99-3.18,7.49-4.31,2.49-1.12,5.18-1.69,8.05-1.69s6.18.63,9.93,1.87c6.24,2,11.48,3.56,15.73,4.68,4.24,1.12,7.55,2.62,9.93,4.5,2.37,1.87,3.99,4.56,4.87,8.05.87,3.5,1.18,8.75.94,15.73Z"/>
        </svg>

      </div>

      {/* Jemné pozadí */}
      <div className="absolute inset-0 overflow-hidden opacity-15 -z-10">
        {[...Array(25)].map((_, i) => (
          <div
            key={i}
            className="absolute w-1 h-1 bg-gray-300 rounded-full"
            style={{
              left: `${Math.random() * 100}%`,
              top: `${Math.random() * 100}%`,
              animation: `fade ${3 + Math.random() * 2}s infinite`,
              animationDelay: `${Math.random() * 2}s`
            }}
          />
        ))}
      </div>

      <style jsx>{`
        @keyframes drawPath {
          to {
            stroke-dashoffset: 0;
          }
        }
        
        @keyframes fade {
          0%, 100% { opacity: 0.1; }
          50% { opacity: 0.3; }
        }
      `}</style>
    </div>
  );
}